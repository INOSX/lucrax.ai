# dataGPT v2.6 - Regras do Projeto

## ğŸ“‹ Arquivos de Regras

Este diretÃ³rio contÃ©m todas as regras e padrÃµes para o desenvolvimento do projeto dataGPT v2.6.

### ğŸ“ Estrutura das Regras

```
.cursor/rules/
â”œâ”€â”€ rules                    # Regras gerais do projeto
â”œâ”€â”€ code-standards          # PadrÃµes de cÃ³digo Python
â”œâ”€â”€ supabase-rules          # Regras especÃ­ficas do Supabase
â”œâ”€â”€ deployment-rules        # Regras de deploy e ambientes
â”œâ”€â”€ changelog-rules         # Regras de CHANGELOG
â”œâ”€â”€ rule-creation-guidelines # Como criar novas regras
â””â”€â”€ README                  # Este arquivo
```

## ğŸ¯ Regras Principais

### 0. **CriaÃ§Ã£o de Regras** (rule-creation-guidelines)
- **Formato**: MDC (Markdown Documentation) do Cursor AI
- **LocalizaÃ§Ã£o**: `.cursor/rules/` (sem extensÃ£o .md)
- **Nomenclatura**: snake_case descritivo
- **Estrutura**: Template padrÃ£o com exemplos e checklists

### 1. **CHANGELOG** (changelog-rules)
- **SEMPRE** manter CHANGELOG.md na raiz do projeto
- **SEMPRE** atualizar antes de cada commit
- **SEMPRE** seguir formato Keep a Changelog
- **SEMPRE** categorizar mudanÃ§as corretamente

### 2. **Deploy** (deployment-rules)
- **SEMPRE** trabalhar no branch `develop`
- **SEMPRE** deploy primeiro para desenvolvimento
- **NUNCA** deploy para produÃ§Ã£o sem solicitaÃ§Ã£o explÃ­cita
- **NUNCA** trabalhar diretamente no branch `main`
- Usar branch `main` apenas quando solicitado explicitamente

### 3. **CÃ³digo** (code-standards)
- Nomenclatura: PascalCase para classes, snake_case para funÃ§Ãµes
- DocumentaÃ§Ã£o obrigatÃ³ria em todas as funÃ§Ãµes
- Tratamento de erros consistente
- ValidaÃ§Ã£o de entrada obrigatÃ³ria

### 3. **Supabase** (supabase-rules)
- Projeto: `hwfnntgacsebqrprqzzm.supabase.co`
- Sempre verificar conexÃ£o antes de operaÃ§Ãµes
- Validar dados antes de inserir
- Usar transaÃ§Ãµes quando possÃ­vel

### 4. **Projeto** (rules)
- Arquitetura modular
- SeguranÃ§a em primeiro lugar
- Testes obrigatÃ³rios
- DocumentaÃ§Ã£o atualizada

## ğŸš€ Fluxo de Desenvolvimento

### 1. Desenvolvimento
```bash
# Sempre no branch develop
git checkout develop
git pull origin develop

# Desenvolver funcionalidade
# ... cÃ³digo ...

# Commit e push (deploy automÃ¡tico para desenvolvimento)
git add .
git commit -m "feat: nova funcionalidade"
git push origin develop
```

### 2. ProduÃ§Ã£o (Apenas Quando Solicitado)
```bash
# UsuÃ¡rio deve solicitar explicitamente
# "faÃ§a deploy para produÃ§Ã£o" ou "deploy em prod"

git checkout main
git merge develop
git push origin main  # Deploy automÃ¡tico para produÃ§Ã£o
```

## ğŸ”’ SeguranÃ§a

### Chaves API
- Nunca commitar chaves reais
- Sempre usar variÃ¡veis de ambiente
- Validar presenÃ§a antes de usar

### ValidaÃ§Ã£o
- URLs: Sempre validar formato
- Dados: Sanitizar entrada do usuÃ¡rio
- APIs: Verificar chaves e configuraÃ§Ãµes

## ğŸ“Š Banco de Dados

### Projeto Supabase
- **ID**: `hwfnntgacsebqrprqzzm`
- **URL**: `https://hwfnntgacsebqrprqzzm.supabase.co`
- **Status**: âœ… Ativo e funcionando

### Tabelas
1. `data_sources` - Fontes de dados
2. `data_analyses` - HistÃ³rico de anÃ¡lises
3. `chart_configurations` - ConfiguraÃ§Ãµes de grÃ¡ficos
4. `user_sessions` - SessÃµes de usuÃ¡rios
5. `api_usage_logs` - Logs de uso
6. `imported_data` - Cache de dados

## ğŸ§ª Testes

### Estrutura
```
tests/
â”œâ”€â”€ test_app.py
â”œâ”€â”€ test_data_loader.py
â”œâ”€â”€ test_chart_generator.py
â””â”€â”€ test_api_client.py
```

### PadrÃµes
- Testes unitÃ¡rios para todas as funÃ§Ãµes
- Mocks para APIs externas
- ValidaÃ§Ã£o de entrada e saÃ­da

## ğŸ“ DocumentaÃ§Ã£o

### Arquivos Principais
- `README.md` - DocumentaÃ§Ã£o principal
- `SUPABASE_INTEGRATION.md` - IntegraÃ§Ã£o Supabase
- `PROJECT_STATUS.md` - Status do projeto
- `VERCEL_DEPLOYMENT.md` - Deploy Vercel

### PadrÃµes
- SeÃ§Ãµes claras com emojis
- Exemplos de cÃ³digo sempre incluÃ­dos
- Status atualizado regularmente

## âš¡ Performance

### OtimizaÃ§Ãµes
- Cache de dados e tokens
- Lazy loading
- Timeouts configurÃ¡veis
- Retry logic para operaÃ§Ãµes de rede

### Monitoramento
- Logs de todas as operaÃ§Ãµes
- MÃ©tricas de performance
- Alertas para falhas

## ğŸš¨ Troubleshooting

### Problemas Comuns
1. **Chaves API invÃ¡lidas** â†’ Verificar variÃ¡veis de ambiente
2. **URLs invÃ¡lidas** â†’ Validar formato do Google Sheets
3. **Timeout** â†’ Ajustar configuraÃ§Ãµes
4. **Erro de banco** â†’ Verificar conexÃ£o Supabase

### Logs Importantes
- Erro de carregamento
- Falha de API
- Erro de banco
- Timeout de operaÃ§Ãµes

## ğŸ“‹ Checklist de Desenvolvimento

### Antes de Commitar
- [ ] CÃ³digo testado localmente
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Tratamento de erros implementado
- [ ] Logs adicionados
- [ ] ValidaÃ§Ãµes incluÃ­das

### Antes de Deploy
- [ ] Testes passando
- [ ] VariÃ¡veis de ambiente configuradas
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Performance verificada
- [ ] SeguranÃ§a validada

## ğŸ”„ Git e Versionamento

### Branches
- `main` - ProduÃ§Ã£o (apenas quando solicitado)
- `develop` - Desenvolvimento (deploy automÃ¡tico)
- `feature/` - Novas funcionalidades
- `hotfix/` - CorreÃ§Ãµes urgentes

### Commits
- Formato: `tipo: descriÃ§Ã£o breve`
- Tipos: `feat`, `fix`, `docs`, `style`, `refactor`, `test`

## ğŸŒ Deploy

### Desenvolvimento
- **Branch**: `develop`
- **URL**: `https://datagpt-develop.vercel.app`
- **Deploy**: AutomÃ¡tico ao fazer push

### ProduÃ§Ã£o
- **Branch**: `main`
- **URL**: `https://datagpt.vercel.app`
- **Deploy**: Apenas quando solicitado explicitamente

## ğŸ“ Como Criar Novas Regras

### Processo PadrÃ£o
1. **Identificar necessidade** de nova regra
2. **Escolher nome** em snake_case (ex: `api-rules`, `testing-rules`)
3. **Usar template** do arquivo `rule-creation-guidelines`
4. **Criar arquivo** sem extensÃ£o `.md` em `.cursor/rules/`
5. **Incluir exemplos** de cÃ³digo e checklists
6. **Atualizar README** com nova regra

### Formato ObrigatÃ³rio
- **LocalizaÃ§Ã£o**: `.cursor/rules/[nome-da-regra]`
- **Formato**: MDC (Markdown Documentation)
- **Estrutura**: Template padrÃ£o com seÃ§Ãµes definidas
- **ConteÃºdo**: Exemplos prÃ¡ticos e checklists

### ValidaÃ§Ã£o
- [ ] Arquivo sem extensÃ£o `.md`
- [ ] Nome em snake_case
- [ ] Estrutura MDC correta
- [ ] Exemplos incluÃ­dos
- [ ] README atualizado

## ğŸ“ Suporte

### Em Caso de DÃºvidas
1. Consultar este arquivo README
2. Verificar regras especÃ­ficas nos arquivos correspondentes
3. Consultar `rule-creation-guidelines` para criar novas regras
4. Verificar logs de erro
5. Consultar documentaÃ§Ã£o do projeto

---

**Ãšltima atualizaÃ§Ã£o**: 27/10/2025  
**VersÃ£o**: 1.1  
**Mantenedor**: Equipe dataGPT
